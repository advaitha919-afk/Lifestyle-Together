<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="dashboard-body">

<script>
const role = localStorage.getItem("userRole");
let you = "", partner = "";

if (role === "her") {
  you = "Advaitha";
  partner = "Harish";
} else {
  you = "Harish";
  partner = "Advaitha";
}

const days = ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
const tasks = ["Study 2 hrs","Exercise 1 hr","15 min Call","Snap / Video"];

function saveTask(day, task, value) {
  localStorage.setItem(`${day}-${task}`, value);
}

function loadTasks() {
  days.forEach(d => {
    tasks.forEach(t => {
      const box = document.getElementById(`${d}-${t}`);
      if (localStorage.getItem(`${d}-${t}`) === "true") {
        box.checked = true;
      }
    });
  });
}

function alertToday() {
  const today = new Date().toLocaleDateString("en-US",{weekday:"long"});
  tasks.forEach(t => {
    if (localStorage.getItem(`${today}-${t}`) !== "true") {
      alert(`⚠️ ${today}: ${t} not completed`);
    }
  });
}

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("youName").innerText = you;
  document.getElementById("partnerName").innerText = partner;
  loadTasks();
  alertToday();
});
</script>

<header class="top-bar">
  <span>Plan your day</span>
  <span>Track your partner</span>
  <span>Focus together</span>
</header>

<div class="layout">

  <!-- LEFT -->
  <div class="side-box">
    <h3>Period</h3>
    <input type="date" onchange="localStorage.setItem('period',this.value)">

    <h3>Status</h3>
    <select onchange="localStorage.setItem('status',this.value)">
      <option>Studying</option>
      <option>Tuition</option>
      <option>Eating</option>
      <option>Busy</option>
      <option>Rest</option>
    </select>
  </div>

  <!-- CENTER -->
  <div class="center-box">
    <h2>You: <span id="youName"></span> | Partner: <span id="partnerName"></span></h2>

    <table class="planner">
      <tr>
        <th>Day</th>
        <th>Study</th>
        <th>Exercise</th>
        <th>Call</th>
        <th>Snap</th>
      </tr>

      <script>
        days.forEach(d => {
          document.write(`<tr><td>${d}</td>`);
          tasks.forEach(t => {
            document.write(`
              <td>
                <input type="checkbox"
                id="${d}-${t}"
                onchange="saveTask('${d}','${t}',this.checked)">
              </td>
            `);
          });
          document.write("</tr>");
        });
      </script>
    </table>

    <div class="remember-box">
      <h4>Remember</h4>
      <ul>
        <li>Don’t stress. Talk to your partner.</li>
        <li>Study for your future.</li>
        <li>Stay disciplined.</li>
        <li>First proposal: Nov 24, 2024 (Him)</li>
        <li>Accepted: Mar 26, 2025 (Her)</li>
        <li>Take short breaks, but keep going.</li>
      </ul>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="side-box">
    <h3>Notes</h3>
    <textarea rows="8"
      onchange="localStorage.setItem('notes',this.value)"
      placeholder="Things to remember..."></textarea>
  </div>

</div>

</body>
</html>